import{r as w,j as e,i as a,s as j,u as v,a as f,F as q,f as y,B as S,N as F}from"./index-5cea30ca.js";const L=p=>{const[m,x]=w.useState(""),{disabled:l=!1,type:o,tabIndex:c=0,placeholder:n,label:u,name:h,error:i,required:r}=p,[s,t]=w.useState(o||"text"),N=d=>{x(d.currentTarget.value)},b=()=>{t(d=>d==="password"?"text":"password")},g=d=>{d.code==="Enter"&&(d.preventDefault(),b())},$=o==="password";return e.jsxs("div",{className:`${a.inputWrapper}${$?` ${a.inputWrapperPassword}`:""}${$&&s==="text"?` ${a.inputWrapperPasswordShown}`:""}${i?` ${a.inputWrapperInvalid}`:""}`,children:[e.jsx("input",{required:r,value:m,onChange:N,className:a.input,name:h,tabIndex:c,type:s,"aria-label":u,disabled:l}),e.jsx("label",{className:a.inputLabel,htmlFor:h,children:u||n}),r&&e.jsx("span",{title:`${h} is required`,className:a.inputRequired,children:"*"}),$&&e.jsx("button",{"aria-label":"Show-Hide password button",type:"button",tabIndex:0,onKeyDown:g,onClick:b,className:`${a.passwordButton} ${s==="password"?a.hidePassword:a.showPassword}`}),!!i&&e.jsx("span",{className:a.inputError,children:i})]})},T=p=>{const{label:m,options:x,name:l,required:o,disabled:c}=p;return e.jsxs("fieldset",{className:`${a.inputWrapper} ${j.fieldset}`,disabled:c,children:[o&&e.jsx("span",{className:a.inputRequired,children:"*"}),e.jsx("legend",{className:j.legend,children:m}),x.map(n=>e.jsxs("div",{className:j.radioContainer,children:[e.jsx("input",{className:j.radio,type:"radio",value:n.value,name:l,required:o,id:n.id}),e.jsx("label",{className:j.radioLabel,htmlFor:n.id,children:n.text})]},n.text))]})},C=p=>{const{fields:m,method:x="post",submitButtonText:l,title:o,actionLinks:c}=p,{state:n}=v(),u=n==="submitting",h=f(),i=w.useRef(null),r=h;return w.useEffect(()=>{if(i.current&&r){let s=!1;Object.keys(r).forEach(t=>{var N;if(r[t]&&!s){const b=(N=i==null?void 0:i.current)==null?void 0:N.querySelector(`input[name="${t}"]`);b&&(b.focus(),s=!0)}})}},[r]),e.jsx(q,{className:y.form,method:x,ref:i,children:e.jsxs(e.Fragment,{children:[!!o&&e.jsx("h1",{className:y.formTitle,children:o}),Object.entries(m).map(([s,t])=>{switch(t.type){case"input":case"password":return e.jsx(L,{name:s,label:t.label,required:t.required,type:t.type==="password"?"password":"text",disabled:u,error:r==null?void 0:r[s]},s);case"radio":return t!=null&&t.options?e.jsx(T,{required:t.required,label:t.label,name:s,options:t.options}):null;default:return null}}),e.jsx(S,{ariaLabel:`${l} form submit button`,className:y.formSubmitButton,type:"submit",isLoading:u,disabled:u,children:l}),!!c&&e.jsx("div",{className:y.actions,children:c.map(s=>e.jsx(F,{className:y.actionLink,to:s.to,children:s.text},s.to))})]})})};export{C as F};
