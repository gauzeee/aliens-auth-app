import{r as b,j as s,s as t,u as $,a as g,F as v,f as p,B as S,N as T}from"./index-efcf1153.js";const q=x=>{const[w,y]=b.useState(""),{disabled:d=!1,type:l,tabIndex:m=0,placeholder:f,label:o,name:c,error:r,required:a}=x,[e,n]=b.useState(l||"text"),h=i=>{y(i.currentTarget.value)},u=()=>{n(i=>i==="password"?"text":"password")},N=i=>{i.code==="Enter"&&(i.preventDefault(),u())},j=l==="password";return s.jsxs("div",{className:`${t.inputWrapper}${j?` ${t.inputWrapperPassword}`:""}${j&&e==="text"?` ${t.inputWrapperPasswordShown}`:""}${r?` ${t.inputWrapperInvalid}`:""}`,children:[s.jsx("input",{required:a,value:w,onChange:h,className:t.input,name:c,tabIndex:m,type:e,"aria-label":o,disabled:d}),s.jsx("label",{className:t.inputLabel,htmlFor:c,children:o||f}),a&&s.jsx("span",{title:`${c} is required`,className:t.inputRequired,children:"*"}),j&&s.jsx("button",{"aria-label":"Show-Hide password button",type:"button",tabIndex:0,onKeyDown:N,onClick:u,className:`${t.passwordButton} ${e==="password"?t.hidePassword:t.showPassword}`}),!!r&&s.jsx("span",{className:t.inputError,children:r})]})},E=x=>{const{fields:w,method:y="post",submitButtonText:d,title:l,actionLinks:m}=x,{state:f}=$(),o=f==="submitting",c=g(),r=b.useRef(null),a=c;return b.useEffect(()=>{if(r.current&&a){let e=!1;Object.keys(a).forEach(n=>{var h;if(a[n]&&!e){const u=(h=r==null?void 0:r.current)==null?void 0:h.querySelector(`input[name="${n}"]`);u&&(u.focus(),e=!0)}})}},[a]),s.jsx(v,{className:p.form,method:y,ref:r,children:s.jsxs(s.Fragment,{children:[!!l&&s.jsx("h1",{className:p.formTitle,children:l}),Object.entries(w).map(([e,n])=>{switch(n.type){case"input":case"password":return s.jsx(q,{name:e,label:n.label,required:n.required,type:n.type==="password"?"password":"text",disabled:o,error:a==null?void 0:a[e]},e);default:return null}}),s.jsx(S,{ariaLabel:`${d} form submit button`,className:p.formSubmitButton,type:"submit",isLoading:o,disabled:o,children:d}),!!m&&s.jsx("div",{className:p.actions,children:m.map(e=>s.jsx(T,{className:p.actionLink,to:e.to,children:e.text},e.to))})]})})};export{E as F};
