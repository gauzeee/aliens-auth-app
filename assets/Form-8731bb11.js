import{r as w,j as e,i as t,s as j,u as v,a as f,F as q,f as y,B as S,N as F}from"./index-302d064a.js";const L=m=>{const[x,b]=w.useState(""),{disabled:c=!1,type:o,tabIndex:u=0,placeholder:i,label:d,name:l,error:r,required:n}=m,[s,a]=w.useState(o||"text"),N=p=>{b(p.currentTarget.value)},h=()=>{a(p=>p==="password"?"text":"password")},g=p=>{p.code==="Enter"&&(p.preventDefault(),h())},$=o==="password";return e.jsxs("div",{className:`${t.inputWrapper}${$?` ${t.inputWrapperPassword}`:""}${$&&s==="text"?` ${t.inputWrapperPasswordShown}`:""}${r?` ${t.inputWrapperInvalid}`:""}`,children:[e.jsx("input",{required:n,value:x,onChange:N,className:t.input,name:l,tabIndex:u,type:s,"aria-label":r?`${l} input error: ${r}`:d,disabled:c}),e.jsx("label",{className:t.inputLabel,htmlFor:l,children:d||i}),n&&e.jsx("span",{title:`${l} is required`,className:t.inputRequired,children:"*"}),$&&e.jsx("button",{"aria-label":"Show-Hide password button",type:"button",tabIndex:0,onKeyDown:g,onClick:h,className:`${t.passwordButton} ${s==="password"?t.hidePassword:t.showPassword}`}),!!r&&e.jsx("span",{"aria-label":`${l} input error: ${r}`,className:t.inputError,children:r})]})},T=m=>{const{label:x,options:b,name:c,required:o,disabled:u}=m;return e.jsxs("fieldset",{className:`${t.inputWrapper} ${j.fieldset}`,disabled:u,children:[o&&e.jsx("span",{className:t.inputRequired,children:"*"}),e.jsx("legend",{className:j.legend,children:x}),b.map(i=>e.jsxs("div",{className:j.radioContainer,children:[e.jsx("input",{className:j.radio,type:"radio",value:i.value,name:c,required:o,id:i.id}),e.jsx("label",{className:j.radioLabel,htmlFor:i.id,children:i.text})]},i.text))]})},C=m=>{const{fields:x,method:b="post",submitButtonText:c,title:o,actionLinks:u}=m,{state:i}=v(),d=i==="submitting",l=f(),r=w.useRef(null),n=l;return w.useEffect(()=>{if(r.current&&n){let s=!1;Object.keys(n).forEach(a=>{var N;if(n[a]&&!s){const h=(N=r==null?void 0:r.current)==null?void 0:N.querySelector(`input[name="${a}"]`);h&&(h.focus(),s=!0)}})}},[n]),e.jsx(q,{className:y.form,method:b,ref:r,children:e.jsxs(e.Fragment,{children:[!!o&&e.jsx("h1",{className:y.formTitle,children:o}),Object.entries(x).map(([s,a])=>{switch(a.type){case"input":case"password":return e.jsx(L,{name:s,label:a.label,required:a.required,type:a.type==="password"?"password":"text",disabled:d,error:n==null?void 0:n[s]},s);case"radio":return a!=null&&a.options?e.jsx(T,{required:a.required,label:a.label,name:s,options:a.options}):null;default:return null}}),e.jsx(S,{ariaLabel:`${c} form submit button`,className:y.formSubmitButton,type:"submit",isLoading:d,disabled:d,children:c}),!!u&&e.jsx("div",{className:y.actions,children:u.map(s=>e.jsx(F,{className:y.actionLink,to:s.to,children:s.text},s.to))})]})})};export{C as F};
